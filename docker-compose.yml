version: "3.8"

volumes:
    app-data:

services:
    oldwave-nginx-container:
        build:
            context: .docker/nginx
            dockerfile: Dockerfile
        image: oldwave_nginx
        container_name: oldwave-nginx-container
        restart: unless-stopped
        ports:
            - "80:80"
        volumes:
            - ./:/var/www
            - .docker/nginx:/etc/nginx/conf.d

    oldwave-api-container:
        build:
            context: .docker/php
            dockerfile: dockerfile
        image: oldwave_api
        container_name: oldwave-api-container
        volumes:
            - ./:/var/www
            - .docker/php/php.ini:/usr/local/etc/php/conf.d/local.ini
        restart: unless-stopped
